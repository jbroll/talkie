# Homophones Data File

The `homophones.json` file contains words that share the same pronunciation,
derived from the CMU pronunciation dictionary used by Vosk.

## File Format

JSON object mapping each word to its list of homophones:

```json
{
  "their": ["their", "there", "they're"],
  "there": ["their", "there", "they're"],
  "write": ["write", "right", "rite", "wright"],
  ...
}
```

Each word maps to ALL words with the same pronunciation (including itself).

## Generation

The homophones file is generated by `src/pos_disambiguate.py` which:

1. Loads the pronunciation dictionary (`en.dic`)
2. Groups words by their phonetic transcription
3. Filters to include only words present in the Vosk model vocabulary
4. Outputs groups with 2+ members as homophones

### Prerequisites

- Vosk compile package with pronunciation dictionary:
  `~/Downloads/vosk-model-en-us-0.22-compile/db/en.dic`
- Vosk model with vocabulary:
  `models/vosk/lm-test/graph/words.txt`

### Running

```bash
cd src
python pos_disambiguate.py
```

The script outputs to `~/.cache/talkie/homophones_<hash>_<version>.json`.

### Copying to data/

After generation, copy the cache file to the data directory:

```bash
cp ~/.cache/talkie/homophones_*.json data/homophones.json
```

## Usage

The homophone correction system (`src/gec/homophone.tcl`) loads this file
and uses ELECTRA masked language modeling to select the most likely
homophone in context.

## Statistics

- Source dictionary: ~312,000 words
- Homophones in vocabulary: ~16,900 entries
- Usable in BERT vocab: ~1,500 single-token homophones

Note: Many common homophones (like "no"/"know", "here"/"hear") may not be
present if they have different phonetic transcriptions in the source
dictionary. This is a limitation of the dictionary-based approach.
